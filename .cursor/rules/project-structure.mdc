---
description: Project structure and file organization guidelines
globs: 
alwaysApply: false
---
# Cursor Rules CLI

A command-line tool for bootstrapping and maintaining **Cursor IDE** rule files in any project, offering interactive setup, auditing, and repository summarisation via Repomix.

## Purpose

Provide developers with an easy-to-use CLI that:
1. Installs default and community **Cursor rules** into the current repository.
2. Generates a compact XML snapshot of the codebase using **Repomix** so AI assistants get rich context.
3. Audits and sanitises existing rule files for potential security issues.
4. Offers quality-of-life features such as shell-completion, version checks, and update notifications.

## Key features

- ğŸš€ **Interactive init** â€“ guided prompts to install rule templates and (optionally) run Repomix.
- ğŸ§© **Template library** â€“ ships with default rules plus [awesome-cursorrules] templates.
- ğŸ” **Audit & Scan** â€“ detect and optionally fix vulnerable or malformed rule files.
- ğŸª„ **Repomix integration** â€“ create `repomix-output.xml` & `repomix.config.json` with sensible defaults.
- ğŸ–¥ **Shell completion** â€“ install/uninstall tab-completion for supported shells.
- ğŸ“¦ **Workspaces ready** â€“ published as a Bun package, compiled to ESM JavaScript.

## Directory structure

```tree
.
â”œâ”€â”€ .github/                 # GitHub configuration and CI workflows
â”‚   â””â”€â”€ workflows/           # Continuous-integration definitions (tests, release)
â”œâ”€â”€ awesome-cursorrules/     # Git submodule with a catalogue of community rule templates
â”œâ”€â”€ cli/                     # Source for the published `@gabimoncha/cursor-rules` package
â”‚   â”œâ”€â”€ bin/                 # Executable entry file distributed on npm
â”‚   â”œâ”€â”€ src/                 # TypeScript source code
â”‚   â”‚   â”œâ”€â”€ audit/           # Regex & Unicode spoofing detection helpers
â”‚   â”‚   â”œâ”€â”€ cli/             # Command implementations (init, list, repomix, scan, â€¦)
â”‚   â”‚   â”œâ”€â”€ core/            # Business-logic utilities shared across commands
â”‚   â”‚   â”œâ”€â”€ shared/          # Logger, constants, error handling, etc.
â”‚   â”‚   â””â”€â”€ templates/       # Built-in rule templates copied during `init`
â”‚   â”œâ”€â”€ package.json         # Manifest for the CLI workspace
â”‚   â””â”€â”€ README.md            # Package-level documentation
â”œâ”€â”€ docs/                    # Detailed markdown documentation (guide, commands, contributing)
â”œâ”€â”€ example/                 # Lightweight sample project used in tests & demos
â”‚   â”œâ”€â”€ parent_folder/       # Nested example showcasing recursive scanning
â”‚   â””â”€â”€ single_folder/       # Alternative flat example structure
â”œâ”€â”€ scripts/                 # Development helper scripts (template copy, vulnerability check)
â”œâ”€â”€ .tool-versions           # Toolchain versions (e.g., Yarn)
â”œâ”€â”€ FUTURE_ENHANCEMENTS.md   # Roadmap and upcoming improvements
â”œâ”€â”€ LICENSE                  # MIT license
â”œâ”€â”€ package.json             # Root workspace manifest (Yarn workspaces & scripts)
â””â”€â”€ README.md                # High-level project overview and usage instructions
```

## Architecture

The CLI is published as an **ESM Bun package** and organised as a workspace inside a monorepo:

1. **Commander.js** powers the command parser (`cli/src/cli/cliRun.ts`).
2. Each command is implemented as an async function under `cli/src/cli/actions/*` and re-exports utilities from `core` and `shared`.
3. Business logic (rule installation, update checks, etc.) lives in `cli/src/core/*`.
4. **Repomix** is invoked programmatically to generate a compressed view of the repository.
5. Build pipeline compiles TypeScript â†’ ESM JS via `tsc`, aliases paths, and copies markdown templates.
6. Automation (CI runs on Bun inside GitHub Actions) ensures tests & smoke checks pass for every push.

## Usage

```bash
# Install globally with Bun
bun add -g @gabimoncha/cursor-rules

# Initialise rules in the current project
cursor-rules init

# Generate Repomix snapshot only
cursor-rules repomix

# List installed rules
cursor-rules list
```

## Technical implementation

- **TypeScript 5** for type-safe source.
- **Bun** as runtime, package manager & test runner.
- **Commander.js** for CLI ergonomics.
- **@clack/prompts** for interactive terminal UX.
- **Repomix** for repository summarisation.
- **Picocolors** for colourful output.

## Future Enhancements

See `FUTURE_ENHANCEMENTS.md` for the full roadmap, including:
- Rule validation & linting
- Additional specialised rule templates (React, Python, Go, â€¦)
- Web UI for rule management
- Deeper integration with code-analysis tools

---

*After saving this file you might need to refresh the Explorer sidebar or restart Cursor to see it in the tree.*
